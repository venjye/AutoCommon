# Git Commit AI 日志功能使用说明

## 功能概述

现在您的 VSCode 扩展已经集成了完整的日志系统，可以帮助您在调试期间查看详细的运行信息。

## 日志功能特性

### 1. 多级别日志
- **DEBUG**: 显示所有详细的调试信息
- **INFO**: 显示一般的运行信息（默认级别）
- **WARN**: 显示警告信息
- **ERROR**: 只显示错误信息

### 2. 日志输出位置
- **VSCode 输出面板**: 专门的 "Git Commit AI" 输出通道
- **开发者控制台**: 同时输出到浏览器/VSCode 开发者控制台

### 3. 详细的日志信息
- 时间戳
- 日志级别
- 详细的上下文信息（如API配置、Git变更长度等）
- 错误堆栈信息

## 如何使用

### 1. 查看日志
有两种方式查看日志：

**方式一：使用命令**
1. 按 `Ctrl+Shift+P` (Windows/Linux) 或 `Cmd+Shift+P` (Mac) 打开命令面板
2. 输入 "显示日志" 或 "Git Commit AI: 显示日志"
3. 选择命令执行

**方式二：手动打开输出面板**
1. 在 VSCode 中按 `Ctrl+Shift+U` (Windows/Linux) 或 `Cmd+Shift+U` (Mac)
2. 在输出面板的下拉菜单中选择 "Git Commit AI"

### 2. 配置日志级别
1. 打开 VSCode 设置 (`Ctrl+,` 或 `Cmd+,`)
2. 搜索 "gitCommitAI.logLevel"
3. 选择合适的日志级别：
   - **DEBUG**: 开发调试时使用，显示最详细信息
   - **INFO**: 日常使用，显示重要操作信息
   - **WARN**: 只关心警告和错误
   - **ERROR**: 只显示错误信息

## 日志内容说明

### 扩展激活时
```
[2024-01-01T12:00:00.000Z] [INFO] Git Commit AI extension is now active!
```

### 生成提交信息流程
```
[2024-01-01T12:00:01.000Z] [INFO] 开始生成提交信息
[2024-01-01T12:00:01.100Z] [DEBUG] 工作区路径
详细信息: {
  "workspaceRoot": "/path/to/your/project"
}
[2024-01-01T12:00:01.200Z] [INFO] 步骤1: 获取Git变更
[2024-01-01T12:00:01.300Z] [DEBUG] Git变更内容长度
详细信息: {
  "length": 1234
}
[2024-01-01T12:00:02.000Z] [INFO] 步骤2: 调用AI生成提交信息
[2024-01-01T12:00:03.000Z] [INFO] AI生成的提交信息
详细信息: {
  "commitMessage": "添加用户登录功能"
}
```

### 错误信息
```
[2024-01-01T12:00:04.000Z] [ERROR] AI API请求失败
详细信息: {
  "status": 401,
  "statusText": "Unauthorized",
  "errorText": "Invalid API key"
}
```

## 调试建议

### 开发环境调试
1. 将日志级别设置为 **DEBUG**
2. 在测试功能时保持输出面板打开
3. 观察每个步骤的详细执行情况

### 生产环境
1. 将日志级别设置为 **INFO** 或 **WARN**
2. 只在出现问题时查看日志

### 常见问题排查
1. **API调用失败**: 查看 DEBUG 级别日志中的API配置信息
2. **Git变更获取失败**: 查看工作区路径和Git命令执行结果
3. **提交信息设置失败**: 查看Git扩展和仓库状态信息

## 注意事项

1. **敏感信息**: API Key 在日志中会显示为 `hasApiKey: true/false`，不会泄露实际密钥
2. **性能**: DEBUG 级别会产生大量日志，建议只在调试时使用
3. **日志清理**: VSCode 会自动管理输出面板的内容，无需手动清理

## 开发环境 vs 正式环境

- **开发环境**: 建议使用 DEBUG 级别，便于调试和问题排查
- **正式环境**: 建议使用 INFO 或 WARN 级别，减少日志噪音

现在您可以通过详细的日志信息来调试和监控扩展的运行状态了！

## 模型管理功能

### 自动获取模型列表

扩展现在支持自动从您配置的API获取可用的模型列表：

1. **使用【获取模型列表】命令**：
   - 按 `Ctrl+Shift+P` (Windows/Linux) 或 `Cmd+Shift+P` (Mac) 打开命令面板
   - 输入 "获取模型列表" 或 "Git Commit AI: 获取模型列表"
   - 选择命令执行

2. **自动模型选择**：
   - 扩展会自动调用您配置的API的 `/models` 端点
   - 显示可用模型的选择列表
   - 选择后自动更新配置

3. **支持的API格式**：
   - OpenAI API 格式 (`/v1/models`)
   - 其他兼容的API格式

### 使用步骤

1. **首先配置API信息**：
   - 设置 `gitCommitAI.apiUrl`（如：`https://api.openai.com/v1/chat/completions`）
   - 设置 `gitCommitAI.apiKey`

2. **获取模型列表**：
   - 执行 "获取模型列表" 命令
   - 从弹出的列表中选择合适的模型

3. **开始使用**：
   - 模型配置会自动保存
   - 可以开始使用AI生成提交信息功能

### 注意事项

- 确保API URL和API Key正确配置
- 不同的API提供商可能有不同的模型列表格式
- 如果获取失败，请检查网络连接和API配置
